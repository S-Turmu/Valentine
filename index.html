<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>valentine</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="container">
      <div
        class="tenor-gif-embed"
        data-postid="22885016"
        data-share-method="host"
        data-aspect-ratio="1.04918"
        data-width="100%"
      >
        <a href="https://tenor.com/view/manja-gif-22885016">Manja Sticker</a>
        from
        <a href="https://tenor.com/search/manja-stickers">Manja Stickers</a>
      </div>
      <script type="text/javascript" async src="https://tenor.com/embed.js"></script>

      <h1>Be my Valentine? ðŸŒ¹</h1>
      <p>-Turmu</p>

      <div class="btn">
        <a href="yes.html">Yes</a>
        <a href="no1.html">No</a>
      </div>
    </div>

    <audio id="bgMusic" src="music.mp3" loop preload="auto"></audio>

    <script>
      // 1. ÐšÐ¾Ð´Ñ‹Ð³ DOMContentLoaded Ð´ÑÑÑ€ Ð°Ð¶Ð¸Ð»Ð»ÑƒÑƒÐ»Ð°Ñ… Ð½ÑŒ Ð¸Ð»Ò¯Ò¯ Ð½Ð°Ð¹Ð´Ð²Ð°Ñ€Ñ‚Ð°Ð¹
      window.addEventListener('DOMContentLoaded', () => {
        const audio = document.getElementById('bgMusic');

        // 2. Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½ Ñ†Ð°Ð³Ð¸Ð¹Ð³ ÑˆÐ°Ð»Ð³Ð°Ñ…
        const savedTime = localStorage.getItem('musicPosition');
        if (savedTime) {
          audio.currentTime = parseFloat(savedTime);
        }

        // 3. Ð”ÑƒÑƒ Ñ‚Ð¾Ð³Ð»ÑƒÑƒÐ»Ð°Ñ… Ñ„ÑƒÐ½ÐºÑ†
        const startPlayback = () => {
          audio.play()
            .then(() => console.log("Ð”ÑƒÑƒ Ð°Ð¼Ð¶Ð¸Ð»Ñ‚Ñ‚Ð°Ð¹ Ñ‚Ð¾Ð³Ð»Ð¾Ð²"))
            .catch(e => console.log("Ð¢Ð¾Ð³Ð»ÑƒÑƒÐ»Ð°Ñ… Ð±Ð¾Ð»Ð¾Ð¼Ð¶Ð³Ò¯Ð¹:", e));
          
          // ÐÑÐ³ ÑƒÐ´Ð°Ð° Ð°Ð¶Ð¸Ð»Ð»Ð°Ð°Ð´ Ò¯Ð¹Ð» ÑÐ²Ð´Ð»ÑƒÑƒÐ´Ñ‹Ð³ ÑƒÑÑ‚Ð³Ð°Ð½Ð°
          document.removeEventListener('click', startPlayback);
          document.removeEventListener('touchstart', startPlayback);
        };

        // 4. Ð”ÑÐ»Ð³ÑÑ† Ð´ÑÑÑ€ Ñ…Ð°Ð°Ð½Ð° Ñ‡ Ð´Ð°Ñ€ÑÐ°Ð½ Ð´ÑƒÑƒ ÑÑ…ÑÐ»Ð½Ñ (Autoplay-Ð¸Ð¹Ð³ Ð¸Ð´ÑÐ²Ñ…Ð¶Ò¯Ò¯Ð»ÑÑ…)
        document.addEventListener('click', startPlayback);
        document.addEventListener('touchstart', startPlayback);

        // 5. Ð¦Ð°Ð³Ð¸Ð¹Ð³ Ñ…Ð°Ð´Ð³Ð°Ð»Ð°Ñ…
        setInterval(() => {
          if (!audio.paused) {
            localStorage.setItem('musicPosition', audio.currentTime);
          }
        }, 500);
      });
    </script>
  </body>
</html>
